Bottom: 0d51a85de97c601609590dcc7326e6da10b941a8
Top:    0d51a85de97c601609590dcc7326e6da10b941a8
Author: Ian Kent <raven@themaw.net>
Date:   2013-02-12 12:00:38 +0800

autofs-5.0.7 - fix wildcard multi map regression

A recent patch that removed code to add the current map entry when
being parsed if it didn't already exist cause wildcard indirect
multi-mount map entries to fail to mount.

Indirect multi-mount map entries need the entry matched by a wildcard
lookup to be added to the map entry cache because subsequent operations
expect a distinct map entry to be present or they will fail. This is
what the code that was removed did but it did so in the wrong place
which caused a deadlock situation.


---


